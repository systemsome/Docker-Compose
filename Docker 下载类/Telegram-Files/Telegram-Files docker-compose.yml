services:
  telegram-files:                # 服务名称，可以自定义
    image: ghcr.io/jarvis2f/telegram-files:latest   # 使用的镜像
    container_name: telegram-files  # 容器名称
    restart: always                # 自动重启策略（系统重启或异常退出时自动重启）
    # 网络模式（可选）
    # bridge：默认网络模式，容器有独立 IP，与宿主机通信需要映射端口
    # host：容器与宿主机共享网络，性能更高，但端口冲突风险大
    # none：不分配网络
    # container:<容器名>：与另一个容器共享网络
    network_mode: bridge           # ✅ 注意：必须是字符串形式，而不是缩进的块！
    ports:
      - "6543:80"                  # 宿主机6543端口 → 容器80端口
    volumes:
      - ./Telegram-Files/data:/app/data  # 数据持久化映射

    environment:
      - APP_ENV=prod
      - APP_ROOT=/app/data        # ✅ 这里不需要映射路径，只需容器内路径
      - TELEGRAM_API_ID=12345678
      - TELEGRAM_API_HASH=123456789abcdefghijklmnopqrstuvw