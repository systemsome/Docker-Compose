services:
  sftpgo:  # 服务名称，可自定义
    image: drakkan/sftpgo:latest  # 使用 SFTPGo 官方最新镜像
    container_name: sftpgo  # 容器名称
    restart: unless-stopped  # 容器停止后不自动重启（可改为 always）
    ports:
      - "2021:8080"  # 管理后台端口：宿主机 2021 → 容器 8080
      - "2022:2022"  # SFTP 服务端口：宿主机 2022 → 容器 2022
      - "2023:2023"  # WebDAV 服务端口：宿主机 2023 → 容器 2023
    volumes:
      - ./data:/srv/sftpgo    # 文件存储目录（存放上传的文件）
      - ./key:/var/lib/sftpgo # 密钥目录（存放 SSH 密钥和配置）
    environment:
      - SFTPGO_WEBDAVD__BINDINGS__0__PORT=2023  # 启用 WebDAV 并指定监听端口